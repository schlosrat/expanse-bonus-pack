YUI.add("hermes-template-photo-well-media-scrappy",function(l,n){var t=l.Template.Handlebars.revive({1:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t<div class="restricted-interstitial">\n\t\t<div class="restricted-interstitial-message">\n\t\t\t<h2>'+l.escapeExpression((s(t,"intlMessage")||n&&s(n,"intlMessage")||l.hooks.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:a,loc:{start:{line:4,column:7},end:{line:4,column:66}}}))+"</h2>\n"+(null!=(o=s(t,"if").call(i,null!=n?s(n,"isSignedIn"):n,{name:"if",hash:{},fn:l.program(2,a,0),inverse:l.program(5,a,0),data:a,loc:{start:{line:5,column:3},end:{line:14,column:10}}}))?o:"")+"\t\t</div>\n\t</div>\n"},2:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c=l.escapeExpression,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t<p>"+c((r(t,"intlMessage")||n&&r(n,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:a,loc:{start:{line:6,column:7},end:{line:6,column:69}}}))+"<br />"+c((r(t,"intlMessage")||n&&r(n,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:a,loc:{start:{line:6,column:75},end:{line:6,column:136}}}))+"</p>\n\n"+(null!=(o=r(t,"unless").call(i,null!=n?r(n,"isMinor"):n,{name:"unless",hash:{},fn:l.program(3,a,0),inverse:l.noop,data:a,loc:{start:{line:8,column:4},end:{line:11,column:15}}}))?o:"")},3:function(l,n,t,e,a){var o=null!=n?n:l.nullContext||{},i=l.hooks.helperMissing,s=l.escapeExpression,c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t\t<p><button class='ui-button'><span>"+s((c(t,"intlMessage")||n&&c(n,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:a,loc:{start:{line:9,column:40},end:{line:9,column:111}}}))+"</span></button></p>\n\t\t\t\t\t<p>"+s((c(t,"intlHTMLMessage")||n&&c(n,"intlHTMLMessage")||i).call(o,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:a,loc:{start:{line:10,column:8},end:{line:10,column:88}}}))+"</p>\n"},5:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c=l.escapeExpression,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t<p>"+c((r(t,"intlMessage")||n&&r(n,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:a,loc:{start:{line:13,column:7},end:{line:13,column:74}}}))+' <a href="//'+c("function"==typeof(o=null!=(o=r(t,"host")||(null!=n?r(n,"host"):n))?o:s)?o.call(i,{name:"host",hash:{},data:a,loc:{start:{line:13,column:86},end:{line:13,column:94}}}):o)+'/signin/" data-track="photoWellSignInClick">'+c((r(t,"intlMessage")||n&&r(n,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:a,loc:{start:{line:13,column:138},end:{line:13,column:179}}}))+"</a></p>\n"},7:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(t,"if").call(null!=n?n:l.nullContext||{},null!=n?i(n,"isVideo"):n,{name:"if",hash:{},fn:l.program(8,a,0),inverse:l.program(10,a,0),data:a,loc:{start:{line:18,column:1},end:{line:39,column:8}}}))?o:""},8:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c=l.escapeExpression,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t<div class="videoplayer main-photo" style="width:'+c("function"==typeof(o=null!=(o=r(t,"width")||(null!=n?r(n,"width"):n))?o:s)?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:19,column:51},end:{line:19,column:60}}}):o)+"px; height:"+c("function"==typeof(o=null!=(o=r(t,"height")||(null!=n?r(n,"height"):n))?o:s)?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:19,column:71},end:{line:19,column:81}}}):o)+'px;"><video id="video_1" poster="'+c("function"==typeof(o=null!=(o=r(t,"src")||(null!=n?r(n,"src"):n))?o:s)?o.call(i,{name:"src",hash:{},data:a,loc:{start:{line:19,column:114},end:{line:19,column:121}}}):o)+'" class="video-js vjs-big-play-centered inherit-size"></video></div>\n'},10:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(t,"if").call(null!=n?n:l.nullContext||{},null!=n?i(n,"showFuzzy"):n,{name:"if",hash:{},fn:l.program(11,a,0),inverse:l.program(13,a,0),data:a,loc:{start:{line:21,column:2},end:{line:38,column:9}}}))?o:""},11:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c=l.escapeExpression,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t<span class="restricted-image main-photo" style="width:'+c("function"==typeof(o=null!=(o=r(t,"width")||(null!=n?r(n,"width"):n))?o:s)?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:22,column:58},end:{line:22,column:67}}}):o)+"px;height:"+c("function"==typeof(o=null!=(o=r(t,"height")||(null!=n?r(n,"height"):n))?o:s)?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:22,column:77},end:{line:22,column:87}}}):o)+'px;"></span>\n'},13:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c="function",r=l.escapeExpression,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t<span class="facade-of-protection-neue" style="width:'+r(typeof(o=null!=(o=u(t,"width")||(null!=n?u(n,"width"):n))?o:s)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:24,column:56},end:{line:24,column:65}}}):o)+"px;height:"+r(typeof(o=null!=(o=u(t,"height")||(null!=n?u(n,"height"):n))?o:s)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:24,column:75},end:{line:24,column:85}}}):o)+'px;">\n\t\t\t\t'+r((u(t,"outlet")||n&&u(n,"outlet")||s).call(i,null!=n?u(n,"zoom-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:25,column:4},end:{line:25,column:24}}}))+"\n\t\t\t\t"+r((u(t,"outlet")||n&&u(n,"outlet")||s).call(i,null!=n?u(n,"vr-overlay-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:26,column:4},end:{line:26,column:30}}}))+'\n\t\t\t</span>\n\n\t\t\t<img width="'+r(typeof(o=null!=(o=u(t,"width")||(null!=n?u(n,"width"):n))?o:s)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:29,column:15},end:{line:29,column:24}}}):o)+'" height="'+r(typeof(o=null!=(o=u(t,"height")||(null!=n?u(n,"height"):n))?o:s)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:29,column:34},end:{line:29,column:44}}}):o)+'" src="'+r(typeof(o=null!=(o=u(t,"src")||(null!=n?u(n,"src"):n))?o:s)===c?o.call(i,{name:"src",hash:{},data:a,loc:{start:{line:29,column:51},end:{line:29,column:58}}}):o)+'" class="low-res-photo" alt="'+r(typeof(o=null!=(o=u(t,"imgAltText")||(null!=n?u(n,"imgAltText"):n))?o:s)===c?o.call(i,{name:"imgAltText",hash:{},data:a,loc:{start:{line:29,column:87},end:{line:29,column:101}}}):o)+'">\n\t\t\t<img width="'+r(typeof(o=null!=(o=u(t,"width")||(null!=n?u(n,"width"):n))?o:s)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:30,column:15},end:{line:30,column:24}}}):o)+'" height="'+r(typeof(o=null!=(o=u(t,"height")||(null!=n?u(n,"height"):n))?o:s)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:30,column:34},end:{line:30,column:44}}}):o)+'" src="'+r(typeof(o=null!=(o=u(t,"highResSrc")||(null!=n?u(n,"highResSrc"):n))?o:s)===c?o.call(i,{name:"highResSrc",hash:{},data:a,loc:{start:{line:30,column:51},end:{line:30,column:65}}}):o)+'" class="main-photo is-hidden" alt="'+r(typeof(o=null!=(o=u(t,"imgAltText")||(null!=n?u(n,"imgAltText"):n))?o:s)===c?o.call(i,{name:"imgAltText",hash:{},data:a,loc:{start:{line:30,column:101},end:{line:30,column:115}}}):o)+'">\n\t\t\t<script nonce="'+r(typeof(o=null!=(o=u(t,"cspNonce")||(null!=n?u(n,"cspNonce"):n))?o:s)===c?o.call(i,{name:"cspNonce",hash:{},data:a,loc:{start:{line:31,column:18},end:{line:31,column:30}}}):o)+"\">\n\t\t\t\tvar img = document.querySelector('.photo-well-media-scrappy-view img.main-photo');\n\t\t\t\timg.onload = function () { registerFirstPhoto(img); };\n\t\t\t<\/script>\n\t\t\t<noscript>\n\t\t\t\t<img width=\""+r(typeof(o=null!=(o=u(t,"width")||(null!=n?u(n,"width"):n))?o:s)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:36,column:16},end:{line:36,column:25}}}):o)+'" height="'+r(typeof(o=null!=(o=u(t,"height")||(null!=n?u(n,"height"):n))?o:s)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:36,column:35},end:{line:36,column:45}}}):o)+'" src="'+r(typeof(o=null!=(o=u(t,"highResSrc")||(null!=n?u(n,"highResSrc"):n))?o:s)===c?o.call(i,{name:"highResSrc",hash:{},data:a,loc:{start:{line:36,column:52},end:{line:36,column:66}}}):o)+'" class="main-photo" alt="'+r(typeof(o=null!=(o=u(t,"imgAltText")||(null!=n?u(n,"imgAltText"):n))?o:s)===c?o.call(i,{name:"imgAltText",hash:{},data:a,loc:{start:{line:36,column:92},end:{line:36,column:106}}}):o)+'">\n\t\t\t</noscript>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(t,"if").call(null!=n?n:l.nullContext||{},null!=n?i(n,"needsInterstitial"):n,{name:"if",hash:{},fn:l.program(1,a,0),inverse:l.program(7,a,0),data:a,loc:{start:{line:1,column:0},end:{line:40,column:7}}}))?o:""},useData:!0}),e={};l.Array.each([],function(n){var t=l.Template.get("hermes/"+n);t&&(e[n]=t)}),l.Template.register("hermes/photo-well-media-scrappy",function(n,a){return a=a||{},a.partials=a.partials?l.merge(e,a.partials):e,t(n,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-moola-view",function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,a,r){return'\t\t\t\t\t\t<a target="_blank" href="/account/upgrade/pro" title="Flickr Pro">Flickr Pro</a>\n'},3:function(t,n,e,a,r){return'\t\t\t\t\t\t<a href="#" class="sponsored-title" title="Sponsored Advertiser">Sponsored Advertiser</a>\n'},5:function(t,n,e,a,r){return'\t\t\t\t\t\t\t<a target="_blank" href="/account/upgrade/pro">Sign up today!</a>\n'},7:function(t,n,e,a,r){return'\t\t\t\t\t\t\t<a target="_blank" href="https://help.flickr.com/en_us/ad-free-browsing-sharing-SJxW22miyX">Learn more about ads</a>\n'},compiler:[8,">= 4.3.0"],main:function(t,n,e,a,r){var i,o,l=null!=n?n:t.nullContext||{},s=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="sub-photo-container centered-content">\n\t<div class="sub-photo-content-container">\n\t\t<div class="view sub-photo-left-view">\n\t\t\t<div class="attribution-view photo-attribution">\n\t\t\t\t<a class="attribution-icon no-menu circle-icon" href="#" data-track="ad_link_rail_icon" target="_blank">\n\t\t\t\t\t<img src="'+t.escapeExpression("function"==typeof(o=null!=(o=s(e,"assetRoot")||(null!=n?s(n,"assetRoot"):n))?o:t.hooks.helperMissing)?o.call(l,{name:"assetRoot",hash:{},data:r,loc:{start:{line:6,column:15},end:{line:6,column:28}}}):o)+'/images/general/moola.png"/>\n\t\t\t\t</a>\n\n\t\t\t\t<div class="attribution-info">\n'+(null!=(i=s(e,"if").call(l,null!=n?s(n,"isProUpsell"):n,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.program(3,r,0),data:r,loc:{start:{line:10,column:5},end:{line:14,column:12}}}))?i:"")+'\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="view sub-photo-title-desc-view" id="yui_3_16_0_rc_1_1_1401741750198_2372">\n\t\t\t\t<div class="title-desc-block">\n\t\t\t\t\t<span class=" meta-field photo-title ">\n'+(null!=(i=s(e,"if").call(l,null!=n?s(n,"isProUpsell"):n,{name:"if",hash:{},fn:t.program(5,r,0),inverse:t.program(7,r,0),data:r,loc:{start:{line:21,column:6},end:{line:25,column:13}}}))?i:"")+'\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="view sub-photo-right-view">\n\t\t\t<a href="/account/upgrade/pro" class="find-out-more" data-track="ad_link_rail_panel" target="_blank">\n\t\t\t\tAd free browsing? Sign up for Flickr Pro\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0}),a={};t.Array.each([],function(n){var e=t.Template.get("hermes/"+n);e&&(a[n]=e)}),t.Template.register("hermes/sub-photo-moola-view",function(n,r){return r=r||{},r.partials=r.partials?t.merge(a,r.partials):a,e(n,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-prbd-moola-position",function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,a,t){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return' data-aa-targeting="'+n.escapeExpression("function"==typeof(o=null!=(o=r(l,"audienceTargets")||(null!=e?r(e,"audienceTargets"):e))?o:n.hooks.helperMissing)?o.call(null!=e?e:n.nullContext||{},{name:"audienceTargets",hash:{},data:t,loc:{start:{line:1,column:106},end:{line:1,column:125}}}):o)+'"'},3:function(n,e,l,a,t){return"upsell-fallback"},5:function(n,e,l,a,t){return'\t\t<a href="/account/upgrade/pro?feed"></a>\n'},7:function(n,e,l,a,t){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t<p class="upgrade-to-pro-cta"><a href="/account/upgrade/pro">'+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:t,loc:{start:{line:7,column:62},end:{line:7,column:116}}}))+"</a></p>\n"},9:function(n,e,l,a,t){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=(r(l,"isFlipped")||e&&r(e,"isFlipped")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},"enable-ad-timer-lock",{name:"isFlipped",hash:{},fn:n.program(10,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:1},end:{line:14,column:15}}}))?o:""},10:function(n,e,l,a,t){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<div class="navad-timer-container">\n\t\t\t<p class="navad-timer-text">'+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{adTimerStartCount:null!=e?o(e,"adTimerStartCount"):e,intlName:"common.AD_INTERSTITIAL_TIMER"},data:t,loc:{start:{line:12,column:31},end:{line:12,column:122}}}))+"</p>\n\t\t</div>\n"},compiler:[8,">= 4.3.0"],main:function(n,e,l,a,t){var o,r,i=null!=e?e:n.nullContext||{},s=n.hooks.helperMissing,u=n.escapeExpression,c=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div data-aaad="true" data-aa-adunit="'+u("function"==typeof(r=null!=(r=c(l,"adUnit")||(null!=e?c(e,"adUnit"):e))?r:s)?r.call(i,{name:"adUnit",hash:{},data:t,loc:{start:{line:1,column:38},end:{line:1,column:48}}}):r)+'" '+(null!=(o=(c(l,"isFlipped")||e&&c(e,"isFlipped")||s).call(i,"enable-audience-tgt",{name:"isFlipped",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:50},end:{line:1,column:140}}}))?o:"")+' class="moola-container '+u("function"==typeof(r=null!=(r=c(l,"class")||(null!=e?c(e,"class"):e))?r:s)?r.call(i,{name:"class",hash:{},data:t,loc:{start:{line:1,column:164},end:{line:1,column:173}}}):r)+" "+(null!=(o=c(l,"if").call(i,null!=e?c(e,"upsellFallback"):e,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:174},end:{line:1,column:218}}}))?o:"")+'">\n'+(null!=(o=c(l,"if").call(i,null!=e?c(e,"upsellFallback"):e,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:2,column:1},end:{line:4,column:8}}}))?o:"")+"</div>\n"+(null!=(o=c(l,"unless").call(i,null!=e?c(e,"showNonUSSticky"):e,{name:"unless",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:0},end:{line:8,column:11}}}))?o:"")+(null!=(o=c(l,"if").call(i,null!=e?c(e,"signedOut"):e,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:9,column:0},end:{line:15,column:7}}}))?o:"")},useData:!0}),a={};n.Array.each([],function(e){var l=n.Template.get("hermes/"+e);l&&(a[e]=l)}),n.Template.register("hermes/prbd-moola-position",function(e,t){return t=t||{},t.partials=t.partials?n.merge(a,t.partials):a,l(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-well-media-interstitial-moola",function(e,a){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,t,r,l){var i,o=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="photo-page-i-m-container">\n'+(null!=(i=e.invokePartial(o(r,"prbd-moola-position"),a,{name:"prbd-moola-position",hash:{audienceTargets:null!=a?o(a,"audienceTargets"):a,signedOut:null!=a?o(a,"signedOut"):a,upsellFallback:null!=a?o(a,"upsellFallback"):a,adUnit:null!=a?o(a,"adUnit"):a,adTimerStartCount:null!=a?o(a,"adTimerStartCount"):a},data:l,indent:"\t",helpers:t,partials:r,decorators:e.decorators}))?i:"")+"</div>\n"},usePartial:!0,useData:!0}),r={};e.Array.each(["prbd-moola-position"],function(a){var t=e.Template.get("hermes/"+a);t&&(r[a]=t)}),e.Template.register("hermes/photo-well-media-interstitial-moola",function(a,l){return l=l||{},l.partials=l.partials?e.merge(r,l.partials):r,t(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("photo-well-media-scrappy-view",function(e,t){var i,n=require("hermes-core/flog")(t);i={photo:{render:function(){var e,t,i,n=this,o=this.get("photo"),s="";return n.preloadImage&&(n.preloadImage.onload=null),this.appContext.forceServerRender?t=e=this.getPhotoForDisplay({canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}):(e=this.getPhotoForDisplay(),t=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]})),o.getValue("owner")&&(s=""===o.getValue("title").trim()?this.intlMessage({intlName:"common.UNTITLED"}):o.getValue("title"),s+=" | "+this.intlMessage({intlName:"common.BY_USER",user:o.getValue("owner").getValue("username")})),(i=this.get("container").one(".main-photo"))&&parseInt(i.getAttribute("width"),10)===e.width&&parseInt(i.getAttribute("height"),10)===e.height||this.setContainerWithTemplate("photo-well-media-scrappy",{width:e.width,height:e.height,src:t.url,highResSrc:e.url,imgAltText:s,needsInterstitial:o.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,isMinor:this.appContext.getViewer().isMinor}),YUI.Env.isServer?(this.serverWidth=e.width,this.serverHeight=e.height):o.getValue("needsInterstitial")||(n.preloadImage=new Image,n.preloadImage.onload=function(){if(!this.onloadFired&&n.isActiveAndInDOM()){this.onloadFired=!0;var e=n.get("container").one(".low-res-photo");n.get("container").one(".main-photo").removeClass("is-hidden").show(),e.hide()}},n.preloadImage.src=e.url,n.preloadImage.complete&&n.preloadImage.onload()),this}},video:{render:function(){var e=this.get("photo"),t=this.getPhotoForDisplay({excludeSizes:[]}),i=t.url;return this.appContext.flipper.isFlipped("disable-video-playback")&&(i="/images/en-us/video-unavailable.png"),!this.player||e.getValue("isVideoPending")||e.getValue("isVideoFailed")?(this.setContainerWithTemplate("photo-well-media-scrappy",{width:t.width,height:t.height,src:i,needsInterstitial:e.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this):(e.getValue("isVideoPending")||e.getValue("isVideoFailed")||(this.player.dimension?(this.player.dimension("width",t.width),this.player.dimension("height",t.height)):this.player.resize(t.width,t.height)),this)}},ad:{render:function(){var t=e.config.flickr.moola.positions.interstitials[0],i={},n=this.appContext.viewportData.getWidth(),o=e.config.flickr.moola.ad_breakpoint_mobile_desktop;return this.adId=e.guid(),i.signedOut=!this.appContext.getViewer().signedIn,i.adTimerStartCount=t.ad_timer_start_value,i.adUnit=t[n<o?"ad_unit_mobile":"ad_unit_desktop"],i.audienceTargets=this.appContext.audienceTargets.getAudienceData(),this.setContainerWithTemplate("photo-well-media-interstitial-moola",i),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"vr-overlay-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,destinationContainer:".photo-well-media-scrappy-view",disabled:function(){return!this.appContext.flipper.isFlipped("enable-vr")}}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.geo=e.geo,this.adSlots=[],""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then(function(i){if(t.set("photo",i),i.getValue("isVideo"))return new e.Promise(function(t,i){e.use("flickr-video-player",function(){t()})})})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):this.get("photo").getValue("isVideo")?i.video.render.call(this):i.photo.render.call(this),!YUI.Env.isServer&&this.subviews["vr-overlay-view"]&&this.subviews["vr-overlay-view"].get("canVr")&&(this.canVR=!0,this.subviews["zoom-view"]&&this.subviews["zoom-view"].destroy({remove:!0})),this.get("photo").getValue("needsInterstitial")?this.get("container").addClass("has-interstitial"):this.get("container").removeClass("has-interstitial"),this},handleInterstitialDismissButtonClick:function(t){var i=this,o=this.get("personPreferences"),s=this.get("photo"),a=s.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),o.setValue("safeSearch",a),o.registry.remoteUpdate(i.appContext.auth.user.nsid).then(function(e){s.registry.attributeSearch({needsInterstitial:!0}).forEach(function(e){s.registry.getValue(e,"safetyLevel")<=o.getValue("safeSearch")&&s.registry.setValue(e,"needsInterstitial",!1)}),i.buildContainer(),i.fire("subviewViewEvent","photoWellResized")},function(e){n.error({err:e}),i.onError(i.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},onParentViewEvent:function(e,t){t&&"photoWellResized"===t[0]&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t=this;return!this.get("photo").getValue("isVideo")||this.get("photo").getValue("isVideoPending")||this.get("photo").getValue("isVideoFailed")||(this.player=new e.FlickrVideoPlayer({container:t.get("container").one(".videoplayer"),model:t.get("photo"),appContext:t.appContext,videoNode:e.one("#video_1")?e.one("#video_1").getDOMNode():null,controlBar:{fullscreenToggle:!1}}),this.player.init(),this.on("destroy",function(){t.player&&(t.player.destroy(),t.player=null)})),this.get("photo").getValue("needsInterstitial")||this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",this.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&t.get("container").one(".restricted-interstitial-message button")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this.appContext.flipper.isFlipped("enable-sticky-ads")&&this.appContext.allowThirdPartyContent&&this.geo&&"US"===this.geo.countryCode&&this.appContext.adManager.handleInfolinks(this.get("photo").getValue("owner").getValue("isPro"),this.isAd),this.isAd&&(asc.cmd.push(asc.processAdsOnPage),e.once("adPageChange",function(){t.fire("subviewViewEvent","adPageTimeoutStart")})),this},showUpsell:function(){var e=this.get("container"),t=e.one("#interstitial-photo-upsell"),i=e.one("iframe");t&&t.addClass("show-upsell"),i&&i.setStyle("display","none")},onError:function(t){new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:this.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,classList:"scrappy-dialog"}).show()},getPhotoForDisplay:function(e){var t,i,n,o=this.getCanvasSize(),s=this.getPixelRatio();return e&&e.canvasSize&&(o=e.canvasSize),t=this.get("photo").getSizeToFit(o,e),i=Math.min(o.height/s,t.height),n=Math.min(o.width/s,t.width/t.height*i),i=Math.min(i,t.height/t.width*n),{width:Math.round(n),height:Math.round(i),url:t.url,pixelRatio:t.width/n}},getCanvasSize:function(){var e,t,i,n,o,s,a=this.getPixelRatio(),r=this.get("container"),h={width:500,height:500};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(t=this.get("container").ancestor(),i=r.getStyle("paddingTop")?parseInt(r.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,n=r.getStyle("paddingBottom")?parseInt(r.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,s=40,o=40,t&&((e=t.get("region")).height=parseInt(t.getStyle("height").match(/[0-9]+/)[0],10)-(i+n),e.width=this.appContext.viewportData.viewport.width-(s+o))):e=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(h={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),e||(e={top:0,left:0,bottom:500,right:500,width:h.width,height:h.height}),e.height*=a,e.width*=a,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flickr-view","moment","vr-overlay-view","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-sub-photo-moola-view","hermes-template-photo-well-media-interstitial-moola"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-context-slider-photo",function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,a){return" currentImage"},3:function(n,l,e,t,a){return" previousImages"},5:function(n,l,e,t,a){return" nextImages"},7:function(n,l,e,t,a){return" restricted-image"},9:function(n,l,e,t,a){return"\t\t<span class='play-slideshow'>&#9654;</span>\n\t\t<span class='countdown-slideshow'></span>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,a){var o,r,i=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,c="function",s=n.escapeExpression,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<a class="context-thumb emptyImage'+(null!=(o=m(e,"if").call(i,null!=l?m(l,"currentPhoto"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:34},end:{line:1,column:74}}}))?o:"")+(null!=(o=m(e,"if").call(i,null!=l?m(l,"previousBigPhotos"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:74},end:{line:1,column:121}}}))?o:"")+(null!=(o=m(e,"if").call(i,null!=l?m(l,"nextBigPhotos"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:121},end:{line:1,column:160}}}))?o:"")+(null!=(o=m(e,"if").call(i,null!=l?m(l,"needsInterstitial"):l,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:160},end:{line:1,column:209}}}))?o:"")+'" href="'+s(typeof(r=null!=(r=m(e,"url")||(null!=l?m(l,"url"):l))?r:u)===c?r.call(i,{name:"url",hash:{},data:a,loc:{start:{line:1,column:217},end:{line:1,column:224}}}):r)+'" data-track="contextSliderNextPhotoClick" style="background-image: url('+s(typeof(r=null!=(r=m(e,"background")||(null!=l?m(l,"background"):l))?r:u)===c?r.call(i,{name:"background",hash:{},data:a,loc:{start:{line:1,column:296},end:{line:1,column:310}}}):r)+"); left: "+s(typeof(r=null!=(r=m(e,"left")||(null!=l?m(l,"left"):l))?r:u)===c?r.call(i,{name:"left",hash:{},data:a,loc:{start:{line:1,column:319},end:{line:1,column:327}}}):r)+'px" data-photo-id="'+s(typeof(r=null!=(r=m(e,"id")||(null!=l?m(l,"id"):l))?r:u)===c?r.call(i,{name:"id",hash:{},data:a,loc:{start:{line:1,column:346},end:{line:1,column:352}}}):r)+'" title="'+s(typeof(r=null!=(r=m(e,"title")||(null!=l?m(l,"title"):l))?r:u)===c?r.call(i,{name:"title",hash:{},data:a,loc:{start:{line:1,column:361},end:{line:1,column:370}}}):r)+'" tabindex="-1">\n'+(null!=(o=m(e,"if").call(i,null!=l?m(l,"currentPhoto"):l,{name:"if",hash:{},fn:n.program(9,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:1},end:{line:5,column:8}}}))?o:"")+"</a>\n"},useData:!0}),t={};n.Array.each([],function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)}),n.Template.register("hermes/context-slider-photo",function(l,a){return a=a||{},a.partials=a.partials?n.merge(t,a.partials):t,e(l,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});