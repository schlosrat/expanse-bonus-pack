YUI.add("flickr-autosuggest-getContextResults-fetcher",function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-autosuggest-getContextResults-fetcher"]={run:function(s,r){var o=this,u=this._processParams(s);return e.Promise.all([r.callAPI("flickr.autosuggest.getContextResults",u),r.getModelRegistry("autosuggest-context-results-models")]).then(function(t){return o._processResponse(t,e.merge(u,s))},e.FetcherErrorLogger(t))},_processParams:function(t){var s=t.id.split("_");return{extras:e.APIHelper.request.getRebootPhotoExtras(),context_id:s[0],context_type:s[1]}},_processResponse:function(e,t){var s,r=e[0],o=e[1];if(s={id:t.id,contextId:t.context_id,contextType:t.context_type,tags:r.results.tags||[],people:r.results.people||[],groups:r.results.groups||[]},!r.results)throw new Error("No `results` property returned by API.");return o.add(s)}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["autosuggest-context-results-models"]});YUI.add("hermes-template-search-autosuggest-list-item",function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,a){return" header"},3:function(n,l,e,t,a){return" empty"},5:function(n,l,e,t,a){var r,o,i=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return" autosuggest-selectable-item"+(null!=(r=c(e,"if").call(i,null!=l?c(l,"selected"):l,{name:"if",hash:{},fn:n.program(6,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:121},end:{line:1,column:153}}}))?r:"")+'" data-track="autosuggestNavigate_'+s("function"==typeof(o=null!=(o=c(e,"rapidType")||(null!=l?c(l,"rapidType"):l))?o:u)?o.call(i,{name:"rapidType",hash:{},data:a,loc:{start:{line:1,column:187},end:{line:1,column:200}}}):o)+'" data-href="'+s("function"==typeof(o=null!=(o=c(e,"url")||(null!=l?c(l,"url"):l))?o:u)?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:1,column:213},end:{line:1,column:220}}}):o)+'"'+(null!=(r=c(e,"if").call(i,null!=l?c(l,"title"):l,{name:"if",hash:{},fn:n.program(8,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:221},end:{line:1,column:264}}}))?r:"")+' tabindex="0"'},6:function(n,l,e,t,a){return" selected"},8:function(n,l,e,t,a){var r,o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return' data-title="'+n.escapeExpression("function"==typeof(r=null!=(r=o(e,"title")||(null!=l?o(l,"title"):l))?r:n.hooks.helperMissing)?r.call(null!=l?l:n.nullContext||{},{name:"title",hash:{},data:a,loc:{start:{line:1,column:247},end:{line:1,column:256}}}):r)+'"'},10:function(n,l,e,t,a){return'"'},12:function(n,l,e,t,a){var r,o=n.lambda,i=n.escapeExpression,u=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<span class="item-icon"><span class="avatar tiny no-menu '+i(o(null!=(r=null!=l?s(l,"avatar"):l)?s(r,"type"):r,l))+'" title="'+i(o(null!=(r=null!=l?s(l,"avatar"):l)?s(r,"title"):r,l))+'"'+(null!=(r=s(e,"if").call(u,null!=(r=null!=l?s(l,"avatar"):l)?s(r,"groupNsid"):r,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:113},end:{line:2,column:183}}}))?r:"")+(null!=(r=s(e,"if").call(u,null!=(r=null!=l?s(l,"avatar"):l)?s(r,"personNsid"):r,{name:"if",hash:{},fn:n.program(15,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:183},end:{line:2,column:256}}}))?r:"")+' style="background-image: url('+i(o(null!=(r=null!=l?s(l,"avatar"):l)?s(r,"url"):r,l))+');"></span></span>'},13:function(n,l,e,t,a){var r,o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return' data-group-nsid="'+n.escapeExpression(n.lambda(null!=(r=null!=l?o(l,"avatar"):l)?o(r,"groupNsid"):r,l))+'"'},15:function(n,l,e,t,a){var r,o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return' data-person-nsid="'+n.escapeExpression(n.lambda(null!=(r=null!=l?o(l,"avatar"):l)?o(r,"personNsid"):r,l))+'"'},17:function(n,l,e,t,a){var r,o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<span class="item-icon"><span class="'+n.escapeExpression("function"==typeof(r=null!=(r=o(e,"iconClass")||(null!=l?o(l,"iconClass"):l))?r:n.hooks.helperMissing)?r.call(null!=l?l:n.nullContext||{},{name:"iconClass",hash:{},data:a,loc:{start:{line:3,column:55},end:{line:3,column:68}}}):r)+'"></span></span>'},19:function(n,l,e,t,a){return'<span class="item-icon"></span>'},21:function(n,l,e,t,a){var r,o=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<span class="item-title'+(null!=(r=u(e,"if").call(o,null!=l?u(l,"header"):l,{name:"if",hash:{},fn:n.program(22,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:37},end:{line:5,column:67}}}))?r:"")+'">'+n.escapeExpression((u(e,"renderTrustedMarkup")||l&&u(l,"renderTrustedMarkup")||i).call(o,(u(e,"multiHighlightString")||l&&u(l,"multiHighlightString")||i).call(o,null!=l?u(l,"title"):l,null!=l?u(l,"titleHighlights"):l,"highlight",{name:"multiHighlightString",hash:{},data:a,loc:{start:{line:5,column:91},end:{line:5,column:147}}}),{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:5,column:69},end:{line:5,column:149}}}))+"</span>"},22:function(n,l,e,t,a){return" tertiary"},24:function(n,l,e,t,a){var r,o=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<span class="item-subtitle '+(null!=(r=u(e,"if").call(o,null!=l?u(l,"header"):l,{name:"if",hash:{},fn:n.program(25,a,0),inverse:n.program(27,a,0),data:a,loc:{start:{line:6,column:44},end:{line:6,column:85}}}))?r:"")+'">'+(null!=(r=u(e,"unless").call(o,null!=l?u(l,"header"):l,{name:"unless",hash:{},fn:n.program(29,a,0),inverse:n.noop,data:a,loc:{start:{line:6,column:87},end:{line:6,column:117}}}))?r:"")+n.escapeExpression((u(e,"renderTrustedMarkup")||l&&u(l,"renderTrustedMarkup")||i).call(o,(u(e,"multiHighlightString")||l&&u(l,"multiHighlightString")||i).call(o,null!=l?u(l,"subtitle"):l,null!=l?u(l,"subtitleHighlights"):l,"highlight",{name:"multiHighlightString",hash:{},data:a,loc:{start:{line:6,column:139},end:{line:6,column:201}}}),{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:6,column:117},end:{line:6,column:203}}}))+(null!=(r=u(e,"unless").call(o,null!=l?u(l,"header"):l,{name:"unless",hash:{},fn:n.program(31,a,0),inverse:n.noop,data:a,loc:{start:{line:6,column:203},end:{line:6,column:233}}}))?r:"")+"</span>"},25:function(n,l,e,t,a){return"link"},27:function(n,l,e,t,a){return"tertiary"},29:function(n,l,e,t,a){return"("},31:function(n,l,e,t,a){return")"},33:function(n,l,e,t,a){var r,o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<span class="item-remove" data-query="'+n.escapeExpression("function"==typeof(r=null!=(r=o(e,"title")||(null!=l?o(l,"title"):l))?r:n.hooks.helperMissing)?r.call(null!=l?l:n.nullContext||{},{name:"title",hash:{},data:a,loc:{start:{line:7,column:52},end:{line:7,column:61}}}):r)+'"><svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg></span>'},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,a){var r,o=null!=l?l:n.nullContext||{},i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="autosuggest-item'+(null!=(r=i(e,"if").call(o,null!=l?i(l,"header"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:28},end:{line:1,column:56}}}))?r:"")+(null!=(r=i(e,"if").call(o,null!=l?i(l,"empty"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:56},end:{line:1,column:82}}}))?r:"")+(null!=(r=i(e,"if").call(o,null!=l?i(l,"url"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.program(10,a,0),data:a,loc:{start:{line:1,column:82},end:{line:1,column:293}}}))?r:"")+">\n\t"+(null!=(r=i(e,"if").call(o,null!=l?i(l,"avatar"):l,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:1},end:{line:2,column:325}}}))?r:"")+"\n\t"+(null!=(r=i(e,"if").call(o,null!=l?i(l,"iconClass"):l,{name:"if",hash:{},fn:n.program(17,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:1},end:{line:3,column:91}}}))?r:"")+"\n\t"+(null!=(r=i(e,"if").call(o,null!=l?i(l,"useIconPlaceholder"):l,{name:"if",hash:{},fn:n.program(19,a,0),inverse:n.noop,data:a,loc:{start:{line:4,column:1},end:{line:4,column:65}}}))?r:"")+"\n\t"+(null!=(r=i(e,"if").call(o,null!=l?i(l,"title"):l,{name:"if",hash:{},fn:n.program(21,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:1},end:{line:5,column:163}}}))?r:"")+"\n\t"+(null!=(r=i(e,"if").call(o,null!=l?i(l,"subtitle"):l,{name:"if",hash:{},fn:n.program(24,a,0),inverse:n.noop,data:a,loc:{start:{line:6,column:1},end:{line:6,column:247}}}))?r:"")+"\n\t"+(null!=(r=i(e,"if").call(o,null!=l?i(l,"clear"):l,{name:"if",hash:{},fn:n.program(33,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:1},end:{line:7,column:148}}}))?r:"")+"\n</div>\n"},useData:!0}),t={};n.Array.each([],function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)}),n.Template.register("hermes/search-autosuggest-list-item",function(l,a){return a=a||{},a.partials=a.partials?n.merge(t,a.partials):t,e(l,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-search-autosuggest-items-list",function(e,t){var a=e.Template.Handlebars.revive({1:function(e,t,a,s,r){var l,n=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t<li class="autosuggest-list-elem" role="menuitem">'+(null!=(l=e.invokePartial(n(s,"search-autosuggest-list-item"),t,{name:"search-autosuggest-list-item",data:r,helpers:a,partials:s,decorators:e.decorators}))?l:"")+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,a,s,r){var l,n=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="autosuggest-items-list" role="menu">\n'+(null!=(l=n(a,"each").call(null!=t?t:e.nullContext||{},null!=t?n(t,"autosuggestItems"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:1},end:{line:4,column:10}}}))?l:"")+"</ul>\n"},usePartial:!0,useData:!0}),s={};e.Array.each(["search-autosuggest-list-item"],function(t){var a=e.Template.get("hermes/"+t);a&&(s[t]=a)}),e.Template.register("hermes/search-autosuggest-items-list",function(t,r){return r=r||{},r.partials=r.partials?e.merge(s,r.partials):s,a(t,r)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-search-autosuggest-list-item"]});YUI.add("autosuggest-data-manager",function(e){function i(e){return e.trim().split(/\s+/)}function t(i){var t=i.replace(/[\W,_]/g,"").toLowerCase();return e.fluid.removeDiacritics(t)}function r(e){var i,t,r="",n=e.split("");for(t=0,i=n.length;t<i-1;t++)r+=n[t]+"[\\W,_]*";return r+=n[i-1]}var n;(n=e.AutosuggestDataManager=function(e){(e=e||{}).prefixTrie?this.prefixTrie=e.prefixTrie:this._buildPrefixTrie(e.items)}).locateQuery=function(e,n){var s,u,f,o,c,l,a,h=[],d={};if(!e||!n)return[];for(a=0,u=(s=i(e)).length;a<u;a++)d[f=t(s[a])]||(o=r(f),(c=new RegExp("(\\b|_)("+o+")","i").exec(n))&&(l=c.index+c[1].length,h.push({start:l,end:l+c[2].length})),d[f]=!0);return h},n.deserialize=function(e){return new n({prefixTrie:JSON.parse(e)})},n.prototype={add:function(e){function r(n){var l,a,h,d,g,p,T,x,m,y,_;for(l=0,a=n.length;l<a;l++){if(h=n[l],g=[],h.title&&(g=g.concat(i(h.title))),h.subtitle&&(g=g.concat(i(h.subtitle))),h.aliases)for(_=0,d=h.aliases.length;_<d;_++)g=g.concat(i(h.aliases[_]));for(_=0,p=g.length;_<p;_++)for(T=g[_],x=o.prefixTrie,m=t(T).split("");y=m.shift();)x.children[y]=x.children[y]||o._newTrieNode(),(x=x.children[y]).itemKeys[h.key]||(x.items.push(h),x.itemKeys[h.key]=!0)}u<s&&(f=s>u+c?u+c:s,n=e.slice(u,f),u=f,setTimeout(function(){r(n)},0))}var n,s,u,f,o=this,c=250;u=0,s=e.length,f=s>u+c?u+c:s,n=e.slice(u,f),u=f,r(n)},query:function(e){var r,n,s,u,f,o=this;return e?(i(e).every(function(e){if(r=o.prefixTrie,!(n=t(e).split("")).length)return!0;for(;r&&(f=n.shift());)r=r.children[f];return r&&0===n.length?(s=r.items.slice(),!(u=u?o._intersectMatches(u,s):s)||0!==u.length):(u=[],!1)}),u||[]):[]},serialize:function(){return JSON.stringify(this.prefixTrie)},_buildPrefixTrie:function(e){this.prefixTrie=this._newTrieNode(),e&&this.add(e)},_newTrieNode:function(){return{items:[],itemKeys:{},children:{}}},_intersectMatches:function(e,i){return e.filter(function(e){return i.some(function(i){return i.key===e.key})})}}},"@VERSION@",{requires:[],optionalRequires:["fluid"]});YUI.add("search-autosuggest-items-list-view",function(e,t){var s=require("hermes-core/flog")(t),a=[{key:"photos",headerTemplate:{titleIntlKey:"search.PHOTOS",searchLink:{textIntlKey:"search.SEARCH_PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS,rapidType:"searchPhotos",iconClass:"icon-photos"}}},{key:"people",headerTemplate:{titleIntlKey:"search.PEOPLE",searchLink:{textIntlKey:"search.SEARCH_PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE,rapidType:"searchPeople",iconClass:"icon-people"}}},{key:"groups",headerTemplate:{titleIntlKey:"search.GROUPS",searchLink:{textIntlKey:"search.SEARCH_GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS,rapidType:"searchGroups",iconClass:"icon-groups"}}},{key:"recent"},{key:"pages"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("autosuggestItems",t.autosuggestItems||{}),this.set("searchUrl",new e.SearchUrl(this.appContext.getLocation().href,this.appContext)),this.set("searchQuery",""),this},loadState:function(){var e=this.appContext.getViewer().signedIn?this.appContext.getViewer().nsid+"_user":"global_global",t=this;return this.appContext.getModel("autosuggest-context-results-models",{id:e}).then(function(e){e&&(t.processTimeout=setTimeout(function(){t.processAutosuggestModels(e)},1e3))},function(t){s.warn("error loading autosuggest data",{modelId:e})})},processAutosuggestModels:function(t){var s={};t&&t.getValue("pages").length&&(s.pages=new e.AutosuggestDataManager({items:t.getValue("pages")})),t&&t.getValue("people").length&&(s.people=new e.AutosuggestDataManager({items:t.getValue("people")})),t&&t.getValue("groups").length&&(s.groups=new e.AutosuggestDataManager({items:t.getValue("groups")})),this.set("autosuggestDataManagers",s)},updateAutosuggestItems:function(e){var t,s=this.get("autosuggestDataManagers"),a={};t=function(e,t){return e.score&&t.score?t.score-e.score:0},e&&s&&(s.pages&&(a.pages=s.pages.query(e).sort(t)),s.people&&(a.people=s.people.query(e).sort(t)),s.groups&&(a.groups=s.groups.query(e).sort(t))),this.appContext.flipper.isFlipped("enable-saving-search-queries-locally")&&(a.recent=this.fetchSavedQueries()),this.set("autosuggestItems",a||{}),this.set("searchQuery",e||""),this.set("previouslySelectedNode",null),this.buildContainer()},buildContainer:function(){return this.assembleAutosuggestItemsList(),this.setContainerWithTemplate("search-autosuggest-items-list",{autosuggestItems:this.get("autosuggestItemsList")}),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("blur",this.handleAutosuggestListItemBlur.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("click",this.handleAutosuggestListItemClick.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("mouseenter",this.handleAutosuggestListItemHoverOn.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("keydown",this.handleAutosuggestListItemKeydown.bind(this),".autosuggest-selectable-item")),this},onParentViewEvent:function(e,t){switch(t&&t.length&&t[0]){case"update-autosuggest-items":this.updateAutosuggestItems(t[1],t[2]);break;case"enable-autosuggest":this.get("container").removeClass("disabled");break;case"disable-autosuggest":this.get("container").addClass("disabled");break;case"autosuggest-keyboard-nav":t[1]&&this.doKeyboardNav(t[1],!0)}},assembleAutosuggestItemsList:function(){var t,s,i,r=[],o=this.get("autosuggestItems")||{},n=this.get("searchQuery")||"";if(n||this.appContext.flipper.isFlipped("enable-saving-search-queries-locally")&&o&&o.recent&&o.recent.length)for(s=0;s<a.length;s++)if(t=a[s],o.hasOwnProperty(t.key)&&o[t.key].length)for(r.push(this.buildSectionHeaderItem(t.headerTemplate,n,!0)),i=0;i<Math.min("recent"===t.key?e.config.flickr.search.nbSavedQueries:3,o[t.key].length);i++)r.push(this.buildAutosuggestListItem(o[t.key][i],t.key,n));else t.headerTemplate&&r.push(this.buildSectionHeaderItem(t.headerTemplate,n,!1));r.length?(r[0].selected=!0,this.fire("subviewViewEvent","autosuggest-has-items")):this.fire("subviewViewEvent","autosuggest-no-items"),this.set("autosuggestItemsList",r)},fetchSavedQueries:function(){var t=e.StorageHelper.getItem(this.appContext.getViewer().nsid+"-"+e.SearchHelper.SAVED_QUERIES_LOCAL_STORAGE_KEY),s=[];return t&&(s=JSON.parse(t).map(function(e){return{header:!1,section:"recent",title:e,iconClass:"icon-search",rapidType:"searchPhotos",subtitle:this.intlMessage({intlName:"search.RECENT"})+" - staff test",clear:!0,url:"/search/?text="+e}}.bind(this))).reverse(),s},removeSavedSearch:function(t){if(t&&this.appContext.flipper.isFlipped("enable-saving-search-queries-locally")&&this.appContext.getViewer().signedIn){var s=this.appContext.getViewer().nsid+"-"+e.SearchHelper.SAVED_QUERIES_LOCAL_STORAGE_KEY,a=e.StorageHelper.getItem(s),i=[];if(a){var r=-1;(r=(i=JSON.parse(a)).indexOf(t))>-1&&(i.splice(r,1),e.StorageHelper.setItem(s,JSON.stringify(i)),this.buildContainer())}return i}},buildSectionHeaderItem:function(e,t,s){var a={header:!0};return e?(a.iconClass="icon-search",e.searchLink&&(a.subtitle=this.intlMessage({intlName:e.searchLink.textIntlKey}),a.url=this.get("searchUrl").clone().createNewSearch(t).setSearchType(e.searchLink.searchType).getURL(),a.iconClass=e.searchLink.iconClass,a.rapidType=e.searchLink.rapidType)):a.empty=!0,a},buildAutosuggestListItem:function(t,s,a){var i,r,o={item:!0};return o.title=t.title||"",o.subtitle=t.subtitle||"",o.rapidType=s,o.titleHighlights=e.AutosuggestDataManager.locateQuery(a,o.title),o.subtitleHighlights=e.AutosuggestDataManager.locateQuery(a,o.subtitle),"pages"===s?(o.url=t.url||"",o.iconClass="icon-docs"):"recent"===s?(o.url=t.url||"",o.iconClass="icon-search",o.clear=!0):(i="groups"===s?"groups":"photos",(r=t.pathalias||t.nsid)&&(o.url="/"+i+"/"+r),t.nsid&&(t.iconserver||0===t.iconserver)&&(o.avatar={type:"groups"===s?"group":"person",title:o.title,url:e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver),personNsid:"people"===s&&t.nsid,groupNsid:"groups"===s&&t.nsid})),o},handleAutosuggestListItemBlur:function(t){var s,a=this;setTimeout(function(){(s=e.one(e.config.doc.activeElement)).hasClass("autosuggest-selectable-item")||a.fire("subviewViewEvent","autosuggest-lost-all-focus")},25)},handleAutosuggestListItemClick:function(e){if(e&&e.target&&e.target.hasClass("item-remove")){e.stopPropagation(),e.preventDefault();var t=e.target.getAttribute("data-query");t&&this.removeSavedSearch(t)}else this.navigateFromAutosuggestListNode(e.currentTarget)},handleAutosuggestListItemKeydown:function(t){var s="";if(t.halt(),!0===t.altKey)e.fire("transfer-to-gn-search",s);else if(t.keyCode>=48&&t.keyCode<=90)s=String.fromCharCode(t.keyCode),s=!0===t.shiftKey?s.toUpperCase():s.toLowerCase(),e.fire("transfer-to-gn-search",s);else switch(t.keyCode){case 8:this.fire("subviewViewEvent","backspace-focus");break;case 13:this.navigateFromAutosuggestListNode(t.target);break;case 27:this.blurAllAutosuggestListNodes();break;case 38:this.doKeyboardNav("up",!1);break;case 40:this.doKeyboardNav("down",!1)}},navigateFromAutosuggestListNode:function(t){var s,a,i;t&&(s=t.getData("href"),a=t.getData("title"),i=t.getData("track")),a&&this.fire("subviewViewEvent","autosuggest-update-field",a),s&&(e.rapidTracker.beacon(this.name,i),this.updateAutosuggestItems(),this.appContext.flapp.navigate(s))},blurAllAutosuggestListNodes:function(){var e=this.get("container").all(".autosuggest-selectable-item");(e?e.size():0)&&e.each(function(e){e.blur()})},doKeyboardNav:function(e,t){var s,a=this.get("container").all(".autosuggest-selectable-item"),i=a?a.size():0,r=-1;i&&((s=this.get("container").one(".autosuggest-selectable-item.selected"))&&(r=a.indexOf(s)),a.removeClass("selected"),(r="up"===e?r-1:r+1)>=0&&r<i?((s=a.item(r)).addClass("selected"),s.focus()):t?(r=r<0?i-1:0,(s=a.item(r)).addClass("selected"),s.focus()):this.fire("subviewViewEvent","focus-search-field"))},handleAutosuggestListItemHoverOn:function(e){var t=this.get("container").one(".autosuggest-selectable-item.selected"),s=e.target;t&&t.removeClass("selected"),s.addClass("selected"),s.focus()},destructor:function(){this.processTimeout&&clearTimeout(this.processTimeout)}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-items-list","hermes-template-search-autosuggest-list-item","autosuggest-data-manager","search-url","search-helper","url-helper"],langBundles:["search"]});YUI.add("hermes-lang-search",function(e,o){e.Intl.add("hermes/search","en-US",{RELEVANT:["Relevant"],RECENT:["Recent"],INTERESTING:["Interesting"],NAME:["Name"],ACTIVITY:["Activity"],SIZE:["Size"],OLDEST:["Oldest"],NEWEST:["Newest"],DEFAULT_SEARCH:['This is where you search Flickr. Here\'s a search for <span class="default-search">',"${query}","</span> to get you started!"],FLICKR_SEARCH:["Flickr Search"],NO_MATCHES_FOR_QUERY_TERM:["Oops! There are no matches for “","${searchTerm}","”."],NO_MATCHES_FOR_QUERY_TERM_WITH_SETTINGS:["Oops! There are no matches for “","${searchTerm}","” with your selected settings."],NO_MATCHES_FOR_QUERY:["Oops! There are no matches for your search."],TRY_DIFFERENT:["Please try refining your search."],TRY_DIFFERENT_BROADER:["Please try broadening your search."],SEARCH_ERROR:["Oops! The date you entered does not exist."],SEARCH_START:["Start your search"],SEARCHING:["Searching"],FETCHING_PHOTOS:["Fetching more photos..."],SEARCH:["Search"],START_YOUR_SEARCH:["Start your search"],BY_USER:["by ","${user}"],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR:["Oops! There are no matches for “","${searchTerm}","” in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS:["Oops! There are no matches for “","${searchTerm}","” in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER:["Oops! There are no matches for “","${searchTerm}","” in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP:["Oops! There are no matches for “","${searchTerm}","” in this group."],NO_MATCHES_FOR_QUERY_TERM_YOUR:["Oops! There are no matches for your search in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTACTS:["Oops! There are no matches for your search in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_USER:["Oops! There are no matches for your search in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_GROUP:["Oops! There are no matches for your search in this group."],API_ERROR_HEADER:["Oh noes! We couldn't process your search."],API_ERROR_SUBHEADER:["Please change it up a bit and try again."],PEOPLE_YOU_FOLLOW:["People you follow"],ALL_FLICKR_MEMBERS:["All Flickr members"],FLICKR_MEMBERS:["Flickr members"],YOUR_GROUPS:["Your groups"],ALL_FLICKR_GROUPS:["All Flickr groups"],FLICKR_GROUPS:["Flickr groups"],MEMBER_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 members",one:"${#} member",other:"${#} members"}}],GROUP_PHOTO_COUNT:[{type:"plural",valueName:"count",options:{zero:"no photos",one:"${#} photo",other:"${#} photos"}}],GROUP_DISCUSSION_COUNT:[{type:"plural",valueName:"count",options:{zero:"no discussions",one:"${#} discussion",other:"${#} discussions"}}],YOUR_PHOTOS:["Your photos"],YOUR_ALBUMS:["Your albums"],YOUR_GALLERIES:["Your galleries"],FROM_YOUR_CONTACTS:["From your contacts"],EVERYONES_PHOTOS:["Everyone's photos"],VIEW_ALL_COUNT:[{type:"plural",valueName:"count",options:{zero:"no more photos",other:"View all ${#}"}}],RESULTS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no results",one:"${#} result",other:"${#} results"}}],PEOPLE_PHOTOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 photos",one:"${#} photo",other:"${#} photos"}}],PEOPLE_VIDEOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no videos",one:"${#} video",other:"${#} videos"}}],PEOPLE_FOLLOWERS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no followers",one:"${#} follower",other:"${#} followers"}}],SAFESEARCH_ON:["SafeSearch on"],SAFESEARCH_OFF:["SafeSearch off"],SAFESEARCH_MODERATE:["SafeSearch moderate"],SEARCH_PHOTOSTREAM:["Search photostream"],SEARCH_FAVORITES:["Search favorites"],ANY_LICENSE:["Any license"],ALL_CC:["All creative commons"],COMMERCIAL_USE:["Commercial use allowed"],MODS_ALLOWED:["Modifications allowed"],COMMERCIAL_USE_MODS:["Commercial use & mods allowed"],NO_RESTRICTIONS:["No known copyright restrictions"],MARKETPLACE_LICENSE:["Flickr Marketplace"],US_GOVT:["U.S. Government works"],PUBLIC_DOMAIN_DEDICATION:["Public Domain Dedication (CC0)"],PUBLIC_DOMAIN_WORK:["Public Domain Work"],CC_BY_NC_SA:["Attribution-NonCommercial-ShareAlike"],CC_BY_NC:["Attribution-NonCommercial"],CC_BY_NC_ND:["Attribution-NonCommercial-NoDerivs"],CC_BY:["Attribution"],CC_BY_SA:["Attribution-ShareAlike"],CC_BY_ND:["Attribution-NoDerivs"],PLAIN_COUNT:[{type:"plural",valueName:"count",options:{zero:"0",one:"${#}",other:"${#}"}}],PHOTOS:["Photos"],PEOPLE:["People"],GROUPS:["Groups"],PHOTOS_POSSESSIVE:["${name}","'s photos"],FAVES_POSSESSIVE:["${name}","'s favorites"],CONTACTS_POSSESSIVE:["${name}","'s contacts"],GROUPS_POSSESSIVE:["${name}","'s groups"],VIEWER_FAVES:["Your favorites"],IN_GROUP_POOL:["In the ","${name}"," group pool"],OPT_OUT_MESSAGE:["You are viewing the alpha version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE:["Go back to the alpha search experience"],OPT_OUT_MESSAGE_BETA:["You are viewing the beta version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE_BETA:["Go back to the beta search experience"],SEARCH_BETA_LABEL:["Search beta"],SEARCH_ALPHA_LABEL:["Search alpha"],GO_BACK_TO_OLD_SEARCH:["Go back to the old Flickr search"],PROVIDE_FEEDBACK:["Provide feedback"],FROM_PEOPLE_YOU_FOLLOW:["From people you follow"],FULL_TEXT_AND_TAGS:["Full text with suggested tags"],FULL_TEXT:["Full text"],TAGS_ONLY:["Tags only"],RED:["Red"],DARK_ORANGE:["Dark orange"],ORANGE:["Orange"],SCHOOL_BUS_YELLOW:["School bus yellow"],LEMON_YELLOW:["Lemon yellow"],GREEN:["Green"],LIME_GREEN:["Dark lime green"],CYAN:["Cyan"],BLUE:["Blue"],VIOLET:["Violet"],PINK:["Pink"],PALE_PINK:["Pale pink"],WHITE:["White"],GRAY:["Gray"],BLACK:["Black"],MONOCHROME:["monochrome"],JOINED_DATE:["Joined ",{type:"date",valueName:"intlDate",format:"monthYearShort"}],HIDE_INACTIVE_GROUPS:["Hide inactive groups"],ADVANCED:["Advanced"],ORIENTATION_AND_SIZE:["Orientation & size"],ORIENTATION:["Orientation"],MINIMUM_SIZE:["Minimum size"],PORTRAIT:["Portrait"],SQUARE:["Square"],LANDSCAPE:["Landscape"],PANORAMA:["Panorama"],SMALL_SHOW_ALL_SIZES:["Small (show all sizes)"],ALL_SIZES:["All sizes"],MEDIUM:["Medium"],LARGE:["Large"],CUSTOM:["Custom"],COLOR:["Color"],DATE:["Date"],FROM:["From"],TO:["To"],DATE_TAKEN:["Date taken"],DATE_POSTED:["Date posted"],DATE_UPLOADED:["Date uploaded"],CONTENT:["Content"],VIDEOS:["Videos"],SCREENSHOTS:["Screenshots"],ILLUSTRATIONS:["Illustrations"],SEARCH_IN:["Search in"],RESET:["Reset"],JUSTIFIED_VIEW:["Justified view"],THUMBNAIL_VIEW:["Thumbnail view"],TILE_VIEW:["Tile view"],SORT:["Sort"],TOGGLE_ADVANCED:["Toggle advanced"],CAMERA_SETTINGS:["Camera settings"],TOGGLE_SEARCH:["Toggle Search"],PHOTOS_PEOPLE_OR_GROUPS:["Photos, people, or groups"],PHOTOS_PEOPLE_GROUPS:["Photos, people, groups"],SMALL_SHORT:["S"],MEDIUM_SHORT:["M"],LARGE_SHORT:["L"],ALL:["All"],TAGS:["Tags"],CLEAR:["Clear"],ABSTRACT:["Abstract"],ART:["Art"],BLACK_AND_WHITE:["Black and white"],MONOCHROME_STYLE:["Monochrome"],BLUR:["Blur"],BRIGHT:["Bright"],CURVES:["Curves"],DIAGONAL:["Diagonal"],ETHEREAL:["Ethereal"],GEOMETRIC:["Geometric"],HDR:["HDR"],LINES:["Lines"],MACRO:["Macro"],DEPTH_OF_FIELD:["Shallow depth of field"],MINIMALIST:["Minimalist"],PASTEL:["Pastel"],PATTERNS:["Patterns"],ROUND:["Round"],SERENE:["Serene"],SYMMETRY:["Symmetry"],TEXTURES:["Textures"],TRIANGLES:["Triangles"],VINTAGE:["Vintage"],BOKEH:["Bokeh"],SEARCH_PHOTOS:["Search photos"],SEARCH_PEOPLE:["Search people"],SEARCH_GROUPS:["Search groups"],EVERYONE:["Everyone"],SIGN_IN_BEFORE_SEARCH_TITLE:["This content is for mature audiences only."],SIGN_IN_BEFORE_SEARCH_MESSAGE:["Join Flickr to turn off safe search."],SIGNUP_FOOTER_MESSAGE:["Private photo management and an inspiring community."]})},"@VERSION@",{requires:["intl"]});